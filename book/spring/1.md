# 1. 오브젝트와 의존관계

## 관심사의 분리

사용자의 비즈니스 프로세스와 그에 따른 요구 사항은 끊임없이 바뀌고 발전한다. 그래서 개발자가 객체를 설계할 때 가장 염두해 두어야 할 사항은 바로 미래를 어떻게 대비할 것인가이다.

변화에 대비하기 위해서는 변화의 폭을 최소한으로 줄여주는 것이 가장 좋은 대책이다. 객체지향의 관점으로는 관심이 같은 것끼리는 하나의 객체 안으로 또는 친한 객체로 모이게 하고, 관심이 다른 것은 가능한 한 따로 떨어져서 서로 영향을 주지 않도록 분리하는 것이라고 생각할 수 있다.

#### 상속을 통한 확장

슈퍼클래스에 기본적인 로직 흐름을 만들고, 그 기능의 일부를 추상 메소드나 오버라이딩이 가능한 protected 메소드 등으로 만든 뒤 서브클래스에서 이런 메소드를 필요에 맞게 구현해서 사용하도록 하는 방법을 `템플릿 메소드 패턴`이라 한다.

서브클래스에서 구체적인 오브젝트 생성 방법을 결정하게 하는 것을 `팩토리 메소드 패턴`이라 한다.

템플릿 메소드 패턴 또는 팩토리 메소드 패턴으로 관심사항이 다른 코드를 분리해내고, 서로 독립적으로 변경 또는 확장할 수 있도록 만드는 것은 간단하면서도 효과적인 방법이다.

단점은 상속을 사용했다는 점이다. 상속은 간단하고 편리하지만 자바는 다중 상속을 허용하지 않는다. 또한, 상하위 클래스의 관계는 생각보다 밀접하다. 슈퍼클래스의 변경사항 때문에 서브클래스도 수정하거나 다시 개발해야할 수도 있다

#### 인터페이스 도입

특정 클래스에 종속적인것을 분리하기 위해서는 두 개의 클래스가 서로 긴밀하게 연결되어 있지 않도록 중간에 추상적인 느슨한 연결고리를 만들어준다. 추상화란 어떤 것들의 공통적인 성격을 뽑아내어 이를 따로 분리해내는 작업이다. 자바가 추상화를 위해 제공하는 가장 유용한 도구는 `인터페이스`다.

인터페이스는 어떤 일을 하겠다는 기능만 정의해놓은 것이다. 따라서 인터페이스에는 어떻게 하겠다는 구현 방법은 나타나 있지 않다. 그것은 인터페이스를 구현한 클래스들이 알아서 결정할 일이다.

#### 관계설정 책임의 분리

클래스 간의 관심사항을 분리하기 위해 클래스 간의 관계 설정이 아닌 오브젝트 간의 관계를 설정해줄 수 있다. 오브젝트 간의 관계 설정 런타임 시에 한쪽이 다른 오브젝트의 레퍼런스를 갖고 있는 방식으로 만들어진다.

오브젝트 사이의 관계가 만들어지려면 만들어진 오브젝트가 있어야 하는데, 직접 생성자를 호출해서 만드는 법도 있지만, 외부에서 만들어준 것을 메소드 파라미터나 생성자 파라미터를 통해 가져오는 방법도 있다.

클래스 사이의 관계는 코드에 다른 클래스 이름이 나타나기 때문에 만들어지는 것이다. 하지만 오브젝트 사이의 관계는 그렇지 않다. 코드에서는 특정 클래스를 전혀 알지 못하더라도 해당 클래스가 구현한 인터페이스를 사용했다면, 그 클래스의 오브젝트를 인터페이스 타입으로 받아서 사용할 수 있다. 바로 객체지향 프로그램에는 `다형성`이라는 특징이 있는 덕분이다.

인터페이스를 도입하고 클라이언트의 도움을 얻는 방법은 상속을 사용해 비슷한 시도를 했을 경우에 비해서 훨씬 유연하다.

#### 원칙과 패턴

* 개방 폐쇄 원칙
  * 클래스나 모듈은 확장에는 열려 있어야 하고 변경에는 닫혀 있어야 한다
* 높은 응집도와 낮은 결합도
  * 높은 응집도란 하나의 모듈, 클래스가 하나의 책임 또는 관심사에만 집중되어 있다는 뜻이다.
  * 낮은 결합도란 책임과 관심사가 다른 오브젝트 또는 모듈과 느슨하게 연결된 형태를 유지하는 것이다. 결합도가 낮아지면 변화에 대응하는 속도가 높아지고, 구성이 깔끔해진다. 확장에도 유연하다.
* 전략 패턴
  * 자신의 기능 컨텍스트에서 필요에 따라 변경이 필요한 알고리즘을 인터페이스를 통해 통째로 외부로 분리시키고, 이를 구현한 구체적인 알고리즘 클래스를 필요에 따라 바꿔서 사용할 수 있게 하는 디자인 패턴이다. 여기서 알고리즘이란 독립적인 책임으로 분리가 가능한 기능을 뜻한다. \(이를 대체 가능한 전략이라고 본다.\)

