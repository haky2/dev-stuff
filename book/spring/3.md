# 3. 템플릿

## 예외처리 기능을 갖춘 DAO

```java
// 예외 처리 기능이 없다!
public void deleteAll() throws SQLException {
    Connection c = dataSource.getConnection();
    
    // 아래에서 예외 발생시 close 되지 않고 리소를 반환을 하지 못한다.
    PreparedStatement ps = c.prepareStatement("delete from users");
    ps.executeUpdate();
    
    ps.close();
    c.close();
}
```

```java
// 예외 처리 완료! 하지만...
public void deleteAll() throws SQLException {
    Connection c = null;
    PreparedStatement ps = null;
    
    try {
        c = dataSource.getConnection();
        ps = c.prepareStatement("delete from users");
        ps.executeUpdate();
    } catch (SQLException e) {
        throw e;
    } finally {
        if (ps != null) {
            try {
                ps.close();
            } catch (SQLException e) {}
        }
        if (c != null) {
            try {
                c.close();
            } catch (SQLException e) {}
        }
    }
}
```

## JDBC try/catch/finally의 문제점

예외처리 코드가 중첩되고, 메소드마다 반복되고 있다. 이러한 코드가 많은 부분에 있으면 실수가 발생할 확률이 높아지며, 당장에는 문제가 발생하지 않더라도 누군가 로직을 수정하려 한다면 언젠가 문제가 발생할 수 있다.

### 분리와 재사용을 위한 디자인 패턴 적용

