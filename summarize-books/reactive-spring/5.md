# 05. 스프링 부트 2와 함께하는 리액티브

리액터 프로젝트는 스프링 프레임워크 없이도 잘 작동하지만, 복잡한 기능을 제공하기 위한 응용 프로그램을 작성하기에는 부족하다. 특히 각 컴포넌트 사이의 결합도를 낮추는 의존성 주입에 대한 지원이 빠져 있다. 더욱 강력하고 커스터마이징이 가능한 애플리케이션을 개발하기 위해서 스프링 프레임워크가 필요하다.

## 성공의 열쇠는 신속하게 출발하는 것

스프링이 제공하는 많은 혜택과 장점에도 불구하고, 제대로 사용하기 위해서는 깊은 이해가 필요하다. 한 예로, IoC는 빈을 유연하게 구성할 수 있게 해주지만, 컨테이너 설정을 다양하게 제공함으로써 생기는 몇 가지 문제가 있다. 

* 쉽게 디버깅 할 수 없는 XML 설정
* IDE 없이는 XML 설정의 정확성을 검증할 수 없음
* 코딩 스타일 부재 및 개발 규칙 적용의 어려움

이러한 문제점으로 대규모 프로젝트의 복잡성이 크게 증가하고 명확성이 떨어질 수 있다.

단순한 IoC와 함께 스프링 프레임워크는 스프링 웹 모듈이나 스프링 데이터 모듈과 같은 훨씬 더 복잡한 기능을 제공한다. 두 모듈 모두 응용 프로그램을 실행하기까지 많은 설정이 필요하다. 이러한 설정은 비즈니스 관련 코드에 비해 설정 및 상용구 코드가 많은 비중을 차지하면서 문제가 발생한다. 코드가 최적화되지 않고 개발자들이 추가적인 작업을 해야 하는 비슷한 코드를 가지게 됐고, 결과적으로 아무런 이유 없이 비용을 낭비한다.

### 빠르게 성장하는 애플리케이션에 대한 핵심 요소로서의 스프링 부트

스프링 팀은 프로젝트를 빠르게 시작하는 것의 중요성을 이해했다. 스프링 아키텍처 전체를 변경하고, 스프링 프레임워크의 사용을 단순화해 개발자가 비즈니스 로직을 보다 빨리 구축할 수 있도록 `스프링 부트`라는 프로젝트를 출시했다. 스프링 부트의 핵심 아이디어는 `애플리케이션 개발 프로세스를 단순화하고 사용자가 추가적인 인프라 설정 없이 새 프로젝트를 시작할 수 있도록 하는 것`이다.

스프링 부트는 두 개의 핵심 모듈에 의존한다. 첫 번째는 Spring-IoC 컨테이너와 관련된 모든 가능한 기본 구성과 함께 제공되는 **spring-boot** 모듈이다. 두 번째는 **spring-boot-autoconfigure**인데, 이 모듈은 스프링 데이터, 스프링 MVC, 스프링 웹플럭스 등과 같은 기존 스프링 프로젝트에서 필요한 모든 설정을 제공한다.

## 스프링 부트 2.0에서의 리액티브

스프링 MVC와 스프링 데이터 모듈의 블로킹 특성으로 인해 프로그래밍 패러다임을 리액티브로 전환하는 것만으로는 별다른 이점이 없었다. 그래서 스프링 팀은 이러한 모듈 내부의 전체 패러다임을 변경하기로 결정했다. 이를 위해 스프링 생태계는 다수의 리액티브 모듈을 제공한다.

### 스프링 코어 패키지에서의 리액티브

스프링 코어는 스프링 생태계의 핵심 모듈이다. 스프링 프레임워크 5.x에서 소개된 눈에 띄는 개선 사항 중 하나는 RxJava 1/2 및 리액터 프로젝트 3과 같은 리액티브 스트림 및 리액티브 라이브러리에 대한 기본 지원이다. 리액티브 응용 프로그램을 작성할 수 있게 해주며, 리액티브 타입 변환, 리액티브 I/O로 작업 및 실시간으로 데이터를 인코딩 및 디코딩하는 데 들어가는 비용을 줄일 수 있게 해준다.

### 웹에서의 리액티브

스프링 부트 2에는 **웹플럭스**라는 새로운 웹 스타터 그룹이 포함돼 있다. 이 그룹은 높은 처리량과 빠른 반응 속도를 필요로 하는 애플리케이션 개발에 새로운 가능성을 제공한다. 웹플럭스 모듈은 리액티브 스트림 어댑터 위에 구축되며, 일반적인 Servlet-API-3.1 기반 서버를 지원함과 동시에 Netty 및 Undertow와 같은 서버 엔진과도 통합된다. 이런 방식으로 웹플럭스는 논블로킹 방식의 기반을 제공한다.

웹플럭스는 리액터 3를 일급 객체로 광범위하게 사용한다. 따라서 별도의 노력없이 리액티브 프로그래밍을 사용할 수 있으며, 리액터 프로젝트와 Netty가 통합된 상태에서 웹 응용 프로그램을 실행할 수도 있다. 마지막으로 웹플럭스 모듈은 배압 지원 기능을 제공하므로 I/O 안정성을 보장한다. 서버 측면의 변화 이외에 클라이언트 측면에서 웹플럭스는 논블로킹 통신을 지원하는 WebClient 클래스를 제공한다.

## 스프링 데이터에서의 리액티브

스프링 데이터는 초창기부터 스토리지 영역에 대한 동기식 블로킹 액세스를 제공했다. 스프링 데이터 프레임워크 5는 데이터베이스 레이어에 대한 리액티브 및 논블로킹 액세스를 할 수 있는 새로운 가능성을 보여줬다. 리액터 프로젝트의 리액티브 타입을 이용해 데이터베이스 커넥터를 완벽하게 리액티브 응용 프로그램과 통합할 수 있게됐다.

스프링 데이터에 리액티브 통합이 가능한 스토리지 메서드 목록은 아래와 같다.

* 스프링 데이터 Mongo 리액티브 모듈
* 스프링 데이터 Cassandra 리액티브 모듈
* 스프링 데이터 Redis 리액티브 모듈
* 스프링 데이터 Couchbase 리액티브 모듈

머지않아 스프링 데이터 JDBC도 리액티브 커넥션이 제공될 것이다. \([R2DBC](https://spring.io/projects/spring-data-r2dbc) 인듯\)

## tmvmf

